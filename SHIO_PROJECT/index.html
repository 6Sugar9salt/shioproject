<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHIO PROJECT | Virtual Artist</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'shio-dark': '#020617',
                        'shio-purple': '#d946ef',
                        'shio-cyan': '#06b6d4',
                    },
                    fontFamily: {
                        'movie': ['Montserrat', 'sans-serif'],
                        'jp': ['Zen Kaku Gothic New', 'sans-serif'],
                        'serif-jp': ['Noto Serif JP', 'serif'],
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 1s cubic-bezier(0.22, 1, 0.36, 1) forwards',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeInUp: {
                            'from': { opacity: '0', transform: 'translateY(40px)', filter: 'blur(10px)' },
                            'to': { opacity: '1', transform: 'translateY(0)', filter: 'blur(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700;900&family=Zen+Kaku+Gothic+New:wght@300;400;500;700&family=Noto+Serif+JP:wght@700;900&display=swap" rel="stylesheet">
    
    <style>
        html, body, #root {
            width: 100%;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background-color: #020617;
            color: white;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #020617; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #d946ef; }

        .glow-text {
            text-shadow: 0 0 20px rgba(217, 70, 239, 0.6), 0 0 40px rgba(139, 92, 246, 0.4);
        }
        
        .aspect-video { aspect-ratio: 16 / 9; }
        .aspect-portrait { aspect-ratio: 3 / 4; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-presets="env,react">
        const { useState, useEffect, useRef } = React;

        // --- Icons ---
        const Icon = ({ path, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const Icons = {
            Menu: <path d="M4 6h16M4 12h16M4 18h16" />,
            X: <path d="M18 6L6 18M6 6l12 12" />,
            Play: <path d="M5 3l14 9-14 9V3z" />,
            TwitterX: <path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z" />,
            Twitter: <path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-12.7 12.5S1.2 2.9 8.3 8.2c-4.4.2-9.2 2.9-10.9 9 1.9-5.7 3.9-9.5 8.3-9.5z" />,
            Instagram: (
                <>
                    <rect width="20" height="20" x="2" y="2" rx="5" ry="5" />
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z" />
                    <line x1="17.5" x2="17.51" y1="6.5" y2="6.5" />
                </>
            ),
            Youtube: (
                <>
                    <path d="M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17" />
                    <path d="m10 15 5-3-5-3z" />
                </>
            ),
            Monitor: (
                <>
                    <rect width="20" height="14" x="2" y="3" rx="2" />
                    <line x1="8" x2="16" y1="21" y2="21" />
                    <line x1="12" x2="12" y1="17" y2="21" />
                </>
            ),
            Film: (
                <>
                    <rect width="18" height="18" x="3" y="3" rx="2" />
                    <path d="M7 3v18" />
                    <path d="M3 7.5h4" />
                    <path d="M3 12h18" />
                    <path d="M3 16.5h4" />
                    <path d="M17 3v18" />
                    <path d="M17 7.5h4" />
                    <path d="M17 16.5h4" />
                </>
            ),
            Bot: (
                <>
                    <path d="M12 8V4H8" />
                    <rect width="16" height="12" x="4" y="8" rx="2" />
                    <path d="M2 14h2" />
                    <path d="M20 14h2" />
                    <path d="M15 13v2" />
                    <path d="M9 13v2" />
                </>
            ),
            Sparkles: (
                <>
                    <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z" />
                    <path d="M5 3v4" />
                    <path d="M9 3v4" />
                    <path d="M3 5h4" />
                    <path d="M3 9h4" />
                </>
            ),
            MapPin: (
                <>
                    <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" />
                    <circle cx="12" cy="10" r="3" />
                </>
            ),
            ExternalLink: (
                <>
                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
                    <polyline points="15 3 21 3 21 9" />
                    <line x1="10" x2="21" y1="14" y2="3" />
                </>
            ),
            ArrowLeft: <path d="M19 12H5M12 19l-7-7 7-7" />,
            ArrowRight: <path d="M5 12h14M12 5l7 7-7 7" />,
            // Added simple link icon for tools
            Link: <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />,
            Link2: <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
        };

        // --- GLOBAL HELPER ---
        // Helper to check for video
        const isVideo = (src) => src && (src.endsWith('.mp4') || src.endsWith('.webm'));

        // --- Data ---
        // Enhanced to include 'steps' for the workflow logic
        const GALLERY_ITEMS = [
            { 
                id: 3, 
                // src removed or ignored, logic now uses steps[0].image
                title: "MV Production", 
                desc: "Process & Behind the scenes",
                steps: [
                    {
                        // Step 1 Title changed to Japanese as requested
                        title: "1. キャラプロンプト作成支援ツール(Aちゃん)",
                        // Date updated to 2025.12.01
                        date: "2025.12.01",
                        desc: "キャラクターの画像や設定テキストから「Visual Core（視覚的特徴）」を抽出し、動画生成AI（Veo）へ最適化されたJSON形式のプロンプトを生成。クリエイティブな「個性」をエンジニアリング的な「構造」へ変換し、出力結果の完全な再現性を確立するツール。",
                        tags: ["VisualCoreExtraction", "DefiningIdentity", "StructuredPrompting"], // Updated tags
                        // Modified: Changed from .jpg image to local video file
                        image: "./Gallery1-1.mp4",
                        tools: [
                            // Tool Name updated with newline for 2-line display
                            // Status: active (clickable)
                            // URL Updated
                            { name: "Character Prompt Generator\n(キャラクター プロンプト 作成ツール)", role: "Identity Generation System", url: "https://shioproject.netlify.app/a_chan", status: "active" }
                        ]
                    },
                    {
                        title: "2. 映像構成・コンテ作成支援ツール(Cちゃん)",
                        date: "2025.12.15", 
                        desc: "楽曲ファイルと歌詞データを入力するだけで、AIが専属の映像監督として機能。曲のテンポや世界観を解析し、Google Veo 3.1に最適化された秒単位のカット割りと演出指示（JSONコンテ）を自動生成する構成作家システム。",
                        tags: ["AnalyzingAudio", "ReasoningScenes", "DirectingVideo"], // Updated tags
                        // Modified: Changed from Unsplash image to local video file
                        image: "./Gallery1-2.mp4",
                        tools: [
                            // Status: active (updated based on C_chan.html context)
                            // Modified: Removed "Gem C: " prefix
                            { name: "MV Storyboarder\n(映像構成・コンテ作成ツール)", role: "Director & Storyteller", url: "https://shioproject.netlify.app/c_chan", status: "active" }
                        ]
                    },
                    {
                        title: "3. Composite & Edit",
                        date: "Coming Soon", // Date changed to indicate status
                        desc: "コンポジット・編集ワークフローについての詳細は現在準備中です。最終的なルック開発の裏側を公開予定です。\n(Content is currently under development)",
                        tags: ["Post Processing", "Compositing", "Coming Soon"], // Added Coming Soon tag
                        image: "https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=1200&auto=format&fit=crop",
                        tools: [
                            // Status: inactive (dead link)
                            { name: "DaVinci Resolve", role: "Color Grading & Editing", url: "#", status: "inactive" }
                        ]
                    }
                ],
                detailTitle: "MV制作ワークフロー",
                detailDate: "2024.05.20",
                detailDesc: "仮想空間「Tokyo Virtual District」のストリートスナップ。雨上がりのアスファルトに反射するネオンと、そこに佇む実在感の表現。",
                detailTags: ["Photography", "Virtual World", "Cyberpunk"],
                detailImage: "https://images.unsplash.com/photo-1614850523459-c2f4c699c52e?q=80&w=1200&auto=format&fit=crop"
            },
            { 
                id: 1, 
                // src removed or ignored
                title: "Virtual Live #01", 
                desc: "First connection",
                steps: [
                    {
                        title: "Virtual Live Debut: 'GENESIS'",
                        date: "2024.03.15",
                        desc: "記念すべき最初のバーチャルライブパフォーマンス。",
                        tags: ["Live Performance", "3D Motion"],
                        image: "https://images.unsplash.com/photo-1535930749574-1399327ce78f?q=80&w=800&auto=format&fit=crop",
                        tools: []
                    }
                ]
            },
            { 
                id: 2, 
                // src removed or ignored
                title: "Cyber Cat #02", 
                desc: "Neon alley explorer",
                steps: [
                    {
                        title: "Cyber Cat: Neon Alley Explorer",
                        date: "2024.06.10",
                        desc: "ネオンサインが煌めくサイバーパンクな路地裏を探索する猫。",
                        tags: ["Virtual Pet", "Cyberpunk"],
                        image: "https://images.unsplash.com/photo-1568605114967-8130f3a36994?q=80&w=800&auto=format&fit=crop",
                        tools: []
                    }
                ]
            },
        ];

        // --- Components ---
        
        const Navbar = ({ scrolled, scrollToSection, setShowVideoModal, onLogoClick }) => {
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

            const navLinks = [
                { id: 'profile', label: 'Profile' },
                { id: 'gallery', label: 'Gallery' },
                { id: 'technology', label: 'Tech' },
            ];

            return (
                <>
                <nav className={`fixed w-full z-50 transition-all duration-500 ${scrolled ? 'bg-shio-dark/90 backdrop-blur-md py-4 border-b border-white/10' : 'bg-transparent py-6 md:py-8'}`}>
                    <div className="container mx-auto px-6 flex justify-between items-center">
                        <div className="flex items-center gap-2 relative z-50 cursor-pointer" onClick={onLogoClick}>
                            <div className="w-1.5 h-6 md:w-2 md:h-8 bg-gradient-to-b from-fuchsia-500 to-cyan-500"></div>
                            <div className="text-lg md:text-xl font-movie font-bold tracking-tighter text-white">
                                SHIO_PROJECT
                            </div>
                        </div>

                        {scrollToSection && (
                            <div className="hidden md:flex items-center space-x-8 text-xs font-movie tracking-[0.2em] uppercase text-slate-400">
                                {navLinks.map(link => (
                                    <a 
                                        key={link.id} 
                                        href={`#${link.id}`} 
                                        onClick={(e) => scrollToSection(e, link.id)} 
                                        className="hover:text-white hover:text-fuchsia-400 transition-colors cursor-pointer"
                                    >
                                        {link.label}
                                    </a>
                                ))}
                                <button 
                                    onClick={() => setShowVideoModal(true)}
                                    className="border border-white/20 px-6 py-2 text-xs font-movie tracking-widest hover:bg-white hover:text-black transition-all uppercase"
                                >
                                    Watch Trailer
                                </button>
                            </div>
                        )}

                        {scrollToSection && (
                            <button 
                                className="md:hidden relative z-50 text-white p-2"
                                onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                            >
                                {mobileMenuOpen ? <Icon path={Icons.X} className="w-6 h-6" /> : <Icon path={Icons.Menu} className="w-6 h-6" />}
                            </button>
                        )}
                    </div>
                </nav>

                <div className={`fixed inset-0 bg-shio-dark z-40 transition-transform duration-300 md:hidden ${mobileMenuOpen ? 'translate-x-0' : 'translate-x-full'}`}>
                    <div className="flex flex-col items-center justify-center h-full gap-8">
                        {scrollToSection && navLinks.map(link => (
                            <a 
                                key={link.id}
                                href={`#${link.id}`} 
                                onClick={(e) => {
                                    setMobileMenuOpen(false);
                                    scrollToSection(e, link.id);
                                }} 
                                className="text-2xl font-movie font-bold tracking-widest text-white hover:text-fuchsia-400 uppercase"
                            >
                                {link.label}
                            </a>
                        ))}
                        <button 
                            onClick={() => {
                                setMobileMenuOpen(false);
                                setShowVideoModal(true);
                            }}
                            className="mt-8 px-8 py-3 bg-fuchsia-600 text-white font-movie tracking-widest text-sm uppercase rounded-full"
                        >
                            Watch Trailer
                        </button>
                    </div>
                </div>
                </>
            );
        };

        // --- Detail Page Component ---
        const WorkDetail = ({ item, onBack, onNext }) => {
            const [activeStepIndex, setActiveStepIndex] = useState(0);

            useEffect(() => {
                setActiveStepIndex(0);
                window.scrollTo(0, 0);
            }, [item]);

            const hasSteps = item.steps && item.steps.length > 0;
            const currentContent = hasSteps ? item.steps[activeStepIndex] : {
                title: item.detailTitle,
                date: item.detailDate,
                desc: item.detailDesc,
                tags: item.detailTags,
                image: item.detailImage,
                tools: []
            };

            return (
                <div key={item.id} className="min-h-screen bg-shio-dark text-white pt-24 pb-12 animate-fade-in-up">
                    <div className="container mx-auto px-6 max-w-5xl">
                        
                        {/* Header Navigation */}
                        <div className="flex justify-between items-center mb-8 border-b border-white/10 pb-4">
                            <button 
                                onClick={onNext}
                                className="group flex items-center gap-3 text-white hover:text-cyan-400 transition-colors font-movie tracking-widest text-xs uppercase"
                            >
                                <div className="p-2 border border-white/20 rounded-full group-hover:border-cyan-400 group-hover:bg-cyan-400/10 transition-all">
                                    <Icon path={Icons.ArrowRight} className="w-4 h-4" />
                                </div>
                                Next Project
                            </button>

                            <button 
                                onClick={onBack}
                                className="group flex items-center gap-2 text-slate-500 hover:text-white transition-colors font-movie tracking-widest text-xs uppercase"
                            >
                                Close
                                <div className="p-1 rounded-full group-hover:bg-white/10 transition-colors">
                                    <Icon path={Icons.X} className="w-5 h-5" />
                                </div>
                            </button>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-12">
                            {/* Image Section */}
                            <div className="space-y-4">
                                <div className="aspect-[4/3] bg-slate-900 border border-white/10 overflow-hidden rounded-sm relative">
                                    {isVideo(currentContent.image) ? (
                                        <video 
                                            src={currentContent.image} 
                                            className="w-full h-full object-cover transition-transform duration-700 hover:scale-105 animate-fade-in-up"
                                            key={activeStepIndex}
                                            muted loop playsInline autoPlay
                                        />
                                    ) : (
                                        <img 
                                            src={currentContent.image} 
                                            alt={currentContent.title} 
                                            className="w-full h-full object-cover transition-transform duration-700 hover:scale-105 animate-fade-in-up"
                                            key={activeStepIndex} 
                                        />
                                    )}
                                    <div className="absolute inset-0 bg-gradient-to-t from-shio-dark/50 to-transparent pointer-events-none"></div>
                                </div>
                                
                                {/* Step Thumbnails */}
                                {hasSteps && item.steps.length > 1 && (
                                    <div className="flex gap-4 overflow-x-auto pb-2">
                                        {item.steps.map((step, i) => (
                                            <div 
                                                key={i} 
                                                onClick={() => setActiveStepIndex(i)}
                                                className={`relative w-32 aspect-video bg-slate-800 border shrink-0 transition-all cursor-pointer group overflow-hidden
                                                    ${activeStepIndex === i ? 'border-fuchsia-500 opacity-100 ring-1 ring-fuchsia-500' : 'border-white/10 opacity-50 hover:opacity-100'}
                                                `}
                                            >
                                                {isVideo(step.image) ? (
                                                    <video src={step.image} className="w-full h-full object-cover" muted loop playsInline autoPlay />
                                                ) : (
                                                    <img src={step.image} className="w-full h-full object-cover" />
                                                )}
                                                <div className={`absolute top-0 left-0 text-xs font-bold px-2 py-1 font-movie
                                                    ${activeStepIndex === i ? 'bg-fuchsia-600 text-white' : 'bg-black/50 text-white group-hover:bg-fuchsia-600 transition-colors'}
                                                `}>
                                                    {i + 1}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>

                            {/* Info Section */}
                            <div className="flex flex-col justify-center animate-fade-in-up" key={`info-${activeStepIndex}`}>
                                <div className="mb-6">
                                    <span className="inline-block px-3 py-1 bg-white/5 border border-white/10 rounded text-[10px] font-movie text-cyan-400 tracking-wider mb-4">
                                        {currentContent.date}
                                    </span>
                                    <h1 className="font-movie text-3xl md:text-4xl font-bold leading-tight mb-2">{currentContent.title}</h1>
                                    <div className="w-12 h-1 bg-fuchsia-500 mb-6"></div>
                                </div>

                                <p className="font-jp text-slate-300 leading-loose mb-8 text-sm md:text-base">
                                    {currentContent.desc}
                                </p>

                                {/* --- NEW: System Tools Section --- */}
                                {currentContent.tools && currentContent.tools.length > 0 && (
                                    <div className="mb-8">
                                        <h3 className="font-movie text-xs text-slate-500 uppercase tracking-widest mb-3 flex items-center gap-2">
                                            <div className="w-1 h-1 bg-cyan-500 rounded-full"></div>
                                            System Tools
                                        </h3>
                                        <div className="grid gap-3">
                                            {currentContent.tools.map((tool, idx) => (
                                                <a 
                                                    key={idx} 
                                                    href={tool.url}
                                                    target={tool.status === 'active' ? "_blank" : undefined}
                                                    rel={tool.status === 'active' ? "noopener noreferrer" : undefined}
                                                    onClick={(e) => {
                                                        if (tool.status !== 'active') {
                                                            e.preventDefault();
                                                        }
                                                    }}
                                                    className={`group flex items-center justify-between p-3 border rounded-sm transition-all duration-300
                                                        ${tool.status === 'active' 
                                                            ? 'bg-white/5 border-white/10 hover:border-cyan-500/50 hover:bg-white/10 cursor-pointer' 
                                                            : 'bg-black/20 border-white/5 opacity-50 cursor-not-allowed'}
                                                    `}
                                                >
                                                    <div className="flex items-center gap-3">
                                                        <div className={`w-8 h-8 flex items-center justify-center border rounded-sm transition-colors
                                                            ${tool.status === 'active' 
                                                                ? 'bg-black/50 border-white/5 group-hover:border-cyan-500/30' 
                                                                : 'bg-black/50 border-white/5'}
                                                        `}>
                                                            <div className={tool.status === 'active' ? "text-cyan-400" : "text-slate-600"}>
                                                                {/* Simple generic link icon for now */}
                                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <p className={`font-movie font-bold text-sm transition-colors whitespace-pre-line
                                                                ${tool.status === 'active' ? 'text-white group-hover:text-cyan-400' : 'text-slate-500'}
                                                            `}>{tool.name}</p>
                                                            <p className="font-movie text-[10px] text-slate-500 tracking-wider uppercase">{tool.role}</p>
                                                        </div>
                                                    </div>
                                                    <div className={`transition-all duration-300
                                                        ${tool.status === 'active' ? 'opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 text-cyan-400' : 'opacity-0'}
                                                    `}>
                                                        <Icon path={Icons.ExternalLink} className="w-4 h-4" />
                                                    </div>
                                                </a>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                <div className="mb-8">
                                    <h3 className="font-movie text-xs text-slate-500 uppercase tracking-widest mb-3">TAGS</h3>
                                    <div className="flex flex-wrap gap-2">
                                        {currentContent.tags.map(tag => (
                                            <span key={tag} className="text-xs font-mono text-fuchsia-300 bg-fuchsia-900/20 px-3 py-1 rounded border border-fuchsia-500/20">
                                                #{tag}
                                            </span>
                                        ))}
                                    </div>
                                </div>

                                <div className="pt-8 border-t border-white/10">
                                    <button className="w-full py-4 bg-white text-black font-movie font-bold tracking-widest hover:bg-cyan-400 transition-colors uppercase">
                                        View Project Files
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [view, setView] = useState('home');
            const [activeWork, setActiveWork] = useState(null);
            
            const [scrolled, setScrolled] = useState(false);
            const [showVideoModal, setShowVideoModal] = useState(false);
            const characterVideoRef = useRef(null);
            const [videoError, setVideoError] = useState(false);

            const videoPath = "./shioED-1.mp4"; 

            useEffect(() => {
                const handleScroll = () => {
                    setScrolled(window.scrollY > 50);
                };
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            // --- 修正箇所: 時間指定ループを削除し、単純な自動再生のみにする ---
            useEffect(() => {
                if (view === 'home') {
                    const video = characterVideoRef.current;
                    if (video && !videoError) {
                        video.muted = true;
                        // 時間指定やループハンドラーは削除済み
                        // videoタグ自体にloop属性があるため、単純な再生のみでOK
                        const playPromise = video.play();
                        if (playPromise !== undefined) {
                            playPromise.catch(() => console.log("Autoplay blocked"));
                        }
                    }
                }
            }, [videoError, view]);

            const smoothScroll = (targetId, duration = 500) => {
                const target = document.getElementById(targetId);
                if (!target) return;
                const targetPosition = target.getBoundingClientRect().top + window.pageYOffset;
                const startPosition = window.pageYOffset;
                const distance = targetPosition - startPosition;
                let startTime = null;
                const ease = (t, b, c, d) => {
                    t /= d / 2;
                    if (t < 1) return c / 2 * t * t * t + b;
                    t -= 2;
                    return c / 2 * (t * t * t + 2) + b;
                };
                const animation = (currentTime) => {
                    if (startTime === null) startTime = currentTime;
                    const timeElapsed = currentTime - startTime;
                    const run = ease(timeElapsed, startPosition, distance, duration);
                    window.scrollTo(0, run);
                    if (timeElapsed < duration) requestAnimationFrame(animation);
                };
                requestAnimationFrame(animation);
            };

            const scrollToSection = (e, id) => {
                e.preventDefault();
                smoothScroll(id, 500); 
            };

            const handleWorkClick = (item) => {
                setActiveWork(item);
                setView('detail');
            };

            const handleBackClick = () => {
                setView('home');
                setActiveWork(null);
                
                setTimeout(() => {
                    smoothScroll('gallery', 800); 
                }, 100);
            };

            const handleNextWork = () => {
                if (!activeWork) return;
                const currentIndex = GALLERY_ITEMS.findIndex(item => item.id === activeWork.id);
                const nextIndex = (currentIndex + 1) % GALLERY_ITEMS.length;
                setActiveWork(GALLERY_ITEMS[nextIndex]);
            };

            return (
                <div className="min-h-screen bg-shio-dark text-white font-sans selection:bg-fuchsia-500 selection:text-white">
                    <Navbar 
                        scrolled={scrolled || view === 'detail'} 
                        scrollToSection={view === 'home' ? scrollToSection : null} 
                        setShowVideoModal={setShowVideoModal}
                        onLogoClick={() => setView('home')}
                    />

                    {view === 'home' ? (
                        <>
                            {/* HERO SECTION */}
                            <section className="relative h-screen flex items-center justify-center overflow-hidden">
                                <div className="absolute inset-0">
                                    <div className="absolute inset-0 opacity-30 bg-[url('https://images.unsplash.com/photo-1555680202-c86f0e12f086?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center mix-blend-luminosity"></div>
                                    <div className="absolute inset-0 bg-gradient-to-t from-shio-dark via-shio-dark/60 to-shio-dark/30"></div>
                                    <div className="absolute top-1/4 left-1/4 w-[300px] md:w-[500px] h-[300px] md:h-[500px] bg-fuchsia-600/20 rounded-full blur-[80px] md:blur-[120px] animate-pulse-slow"></div>
                                    <div className="absolute bottom-1/4 right-1/4 w-[300px] md:w-[500px] h-[300px] md:h-[500px] bg-cyan-600/20 rounded-full blur-[80px] md:blur-[120px] animate-pulse-slow" style={{animationDelay: '2s'}}></div>
                                </div>

                                <div className="relative z-10 w-full max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-12 gap-8 items-center h-full pt-20">
                                    <div className="md:col-span-8 flex flex-col justify-center relative">
                                        <div className="absolute -top-10 -left-10 md:-top-20 md:-left-20 text-[100px] md:text-[200px] font-black text-white/5 font-movie leading-none select-none pointer-events-none">SUGAR</div>
                                        <div className="absolute -bottom-10 -right-10 md:-bottom-20 md:-right-20 text-[100px] md:text-[200px] font-black text-white/5 font-movie leading-none select-none pointer-events-none">SALT</div>

                                        <h1 className="relative z-10 animate-fade-in-up">
                                            <span className="block font-serif-jp text-4xl md:text-7xl lg:text-8xl font-black leading-tight mb-2 tracking-wide glow-text bg-clip-text text-transparent bg-gradient-to-br from-white via-white to-slate-400">
                                                甘いだけじゃ<br/>つまんない
                                            </span>
                                            <span className="block font-movie text-fuchsia-400 text-sm md:text-2xl tracking-[0.3em] md:tracking-[0.5em] mt-4 md:mt-6 uppercase font-bold">
                                                Not just sweet.
                                            </span>
                                        </h1>

                                        <div className="mt-8 md:mt-12 flex items-center gap-6 animate-fade-in-up" style={{animationDelay: '0.3s'}}>
                                            <button 
                                                onClick={() => setShowVideoModal(true)}
                                                className="group flex items-center gap-4 bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 pl-4 pr-6 py-3 md:py-4 transition-all duration-300 rounded-sm"
                                            >
                                                <div className="w-8 h-8 md:w-10 md:h-10 bg-white text-black flex items-center justify-center rounded-full group-hover:scale-110 transition-transform">
                                                    <Icon path={Icons.Play} className="w-3 h-3 md:w-4 md:h-4 fill-current ml-0.5" />
                                                </div>
                                                <div className="text-left">
                                                    <div className="text-[10px] text-slate-400 font-movie tracking-widest uppercase">Portfolio Showcase</div>
                                                    <div className="text-xs md:text-sm font-bold font-movie tracking-wider">WATCH VIDEO</div>
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            {/* CHARACTER / PROFILE SECTION */}
                            <section id="profile" className="py-24 md:py-32 bg-slate-900/50 relative border-t border-white/5">
                                <div className="container mx-auto px-6">
                                    <div className="flex flex-col md:flex-row gap-12 md:gap-16 items-center">
                                        <div className="w-full md:w-5/12 relative group">
                                            <div className="absolute -inset-4 bg-gradient-to-tr from-fuchsia-600/30 to-cyan-600/30 rounded-lg blur-2xl group-hover:opacity-75 transition-opacity duration-500"></div>
                                            <div className="aspect-portrait bg-slate-900 border border-white/10 relative overflow-hidden rounded-sm shadow-2xl">
                                                <div className="absolute inset-0 bg-slate-800">
                                                    <img src="https://images.unsplash.com/photo-1615818967406-38435d884784?q=80&w=1974&auto=format&fit=crop" alt="Fallback" className="w-full h-full object-cover opacity-60 mix-blend-overlay"/>
                                                </div>
                                                {!videoError && (
                                                    <video 
                                                        ref={characterVideoRef}
                                                        className="absolute inset-0 w-full h-full object-cover opacity-100"
                                                        muted loop playsInline autoPlay
                                                        src={videoPath}
                                                        onError={() => setVideoError(true)}
                                                    />
                                                )}
                                                {videoError && (
                                                    <div className="absolute inset-0 flex flex-col items-center justify-center p-6 bg-black/40 backdrop-blur-sm">
                                                        <Icon path={Icons.Sparkles} className="w-10 h-10 mb-3 text-fuchsia-400" />
                                                        <p className="font-movie text-white font-bold tracking-widest text-xs mb-4">CHARACTER VISUAL</p>
                                                        <button onClick={() => setShowVideoModal(true)} className="px-5 py-2 bg-white/10 border border-white/20 rounded-full text-[10px] font-movie tracking-widest hover:bg-white hover:text-black transition-all">VIEW TRAILER</button>
                                                    </div>
                                                )}
                                                <div className="absolute bottom-0 left-0 w-full p-6 z-20 bg-gradient-to-t from-black/80 to-transparent">
                                                    <div className="flex flex-wrap gap-2">
                                                        <span className="px-3 py-1 bg-fuchsia-500 text-black text-[10px] font-bold font-movie tracking-widest whitespace-nowrap">GenAI Creator</span>
                                                        <span className="px-3 py-1 bg-cyan-500 text-black text-[10px] font-bold font-movie tracking-widest whitespace-nowrap">AI Sherpa</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div className="w-full md:w-7/12 relative">
                                            <h2 className="text-6xl md:text-9xl font-black text-white/5 font-movie absolute -top-16 -left-8 md:-translate-x-16 select-none pointer-events-none">PROFILE</h2>
                                            <div className="relative z-10">
                                                <div className="flex items-center gap-4 mb-4">
                                                    <h3 className="text-3xl md:text-4xl font-serif-jp font-bold">佐藤 詩央</h3>
                                                    <div className="h-px flex-grow bg-gradient-to-r from-white/20 to-transparent"></div>
                                                </div>
                                                <p className="font-movie text-fuchsia-400 tracking-widest text-sm mb-8">SATO SHIO / Virtual Artist</p>
                                                
                                                <p className="font-jp text-base md:text-lg leading-relaxed text-slate-300 mb-10 border-l-2 border-fuchsia-500/50 pl-6">
                                                    Gemini 2.5 Proによって生成されたビジュアルモデル。<br/>
                                                    Veo 3.1による動画生成技術を活用し、「歌」と「ゲーム」を軸に活動するバーチャルアーティスト。<br/>
                                                    甘さと辛さを併せ持つキャラクター性が特徴。
                                                </p>
                                                
                                                <div className="flex items-start gap-3 mb-8 text-slate-400 bg-white/5 p-4 rounded-lg border border-white/5">
                                                    <Icon path={Icons.MapPin} className="w-5 h-5 mt-0.5 text-cyan-400 flex-shrink-0" />
                                                    <p className="font-jp text-sm">
                                                        <span className="block text-white mb-1">Concept Location</span>
                                                        <span className="opacity-60">Tokyo Virtual District / Hidden Bar "SUGAR & SALT"</span>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            {/* GALLERY SECTION */}
                            <section id="gallery" className="py-24 bg-shio-dark relative border-t border-white/5">
                                <div className="container mx-auto px-6">
                                    <div className="flex justify-between items-end mb-12">
                                        <div>
                                            <span className="font-movie text-cyan-400 tracking-[0.3em] text-xs uppercase block mb-2">Visual Archive</span>
                                            <h2 className="font-movie text-3xl md:text-5xl font-black text-white uppercase tracking-tighter">GALLERY</h2>
                                        </div>
                                    </div>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-8">
                                        {GALLERY_ITEMS.map((item) => {
                                            // Determine thumbnail source: use the first step's image if available
                                            const thumbnailSrc = item.steps && item.steps.length > 0 ? item.steps[0].image : item.src;
                                            
                                            return (
                                                <div 
                                                    key={item.id} 
                                                    onClick={() => handleWorkClick(item)}
                                                    className="group relative aspect-video md:aspect-square overflow-hidden bg-slate-900 border border-white/10 cursor-pointer"
                                                >
                                                    {isVideo(thumbnailSrc) ? (
                                                        <video 
                                                            src={thumbnailSrc} 
                                                            className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-70 group-hover:opacity-100"
                                                            muted loop playsInline autoPlay
                                                        />
                                                    ) : (
                                                        <img 
                                                            src={thumbnailSrc} 
                                                            alt={item.title} 
                                                            className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-70 group-hover:opacity-100" 
                                                        />
                                                    )}
                                                    <div className="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-90"></div>
                                                    <div className="absolute bottom-0 left-0 p-6 transform translate-y-2 group-hover:translate-y-0 transition-transform duration-300">
                                                        <p className="font-movie text-xs text-fuchsia-400 tracking-widest mb-1">{item.title}</p>
                                                        <p className="font-jp text-sm text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300 delay-100">{item.desc}</p>
                                                        <div className="mt-4 inline-block border-b border-fuchsia-400 text-[10px] text-fuchsia-400 font-movie uppercase tracking-widest opacity-0 group-hover:opacity-100 transition-opacity duration-300 delay-200">
                                                            View Details
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                </div>
                            </section>

                            {/* TECHNOLOGY SECTION */}
                            <section id="technology" className="py-24 md:py-32 bg-slate-900 relative border-t border-white/5">
                                <div className="container mx-auto px-6 relative z-10">
                                    <div className="flex flex-col md:flex-row justify-between items-end mb-16 gap-4">
                                        <div>
                                            <span className="font-movie text-fuchsia-400 tracking-[0.3em] text-xs uppercase block mb-2">Production Technology</span>
                                            <h2 className="font-movie text-4xl md:text-6xl font-black text-white uppercase tracking-tighter">
                                                AI <span className="text-transparent bg-clip-text bg-gradient-to-r from-fuchsia-400 to-cyan-400">CREDITS</span>
                                            </h2>
                                        </div>
                                        <div className="text-left md:text-right">
                                            <p className="font-jp text-sm text-slate-400">プロジェクト使用技術スタック</p>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-px bg-white/10 border border-white/10">
                                        <TechCard 
                                            icon={<Icon path={Icons.Monitor} className="w-8 h-8 text-fuchsia-500" />} 
                                            num="01" 
                                            title="CHARACTER DESIGN" 
                                            model="Gemini 2.5 Pro"
                                            desc="style: nano banana"
                                        />
                                        <TechCard 
                                            icon={<Icon path={Icons.Film} className="w-8 h-8 text-cyan-500" />} 
                                            num="02" 
                                            title="VIDEO GENERATION" 
                                            model="Veo 3.1"
                                            desc="静止画入力からの動画生成、表情アニメーション"
                                        />
                                        <TechCard 
                                            icon={<Icon path={Icons.Bot} className="w-8 h-8 text-purple-500" />} 
                                            num="03" 
                                            title="CREATIVE DIRECTION" 
                                            model="Gemini Gems"
                                            desc="シナリオライティング、プロンプトエンジニアリング"
                                        />
                                    </div>
                                </div>
                            </section>

                            {/* FOOTER */}
                            <footer className="py-12 bg-black border-t border-white/10 text-center">
                                <div className="container mx-auto px-6 flex flex-col items-center gap-8">
                                    <div className="text-2xl font-movie font-bold tracking-tighter text-white">SHIO_PROJECT</div>
                                    <div className="flex gap-8">
                                        <FooterLink icon={<Icon path={Icons.TwitterX} className="w-5 h-5" />} href="https://x.com/6sugar9salt" />
                                        
                                        <a href="https://www.showroom-live.com/r/3b3b19729779" target="_blank" rel="noopener noreferrer" className="w-5 h-5 flex items-center justify-center opacity-50 hover:opacity-100 transition-opacity">
                                            <img src="./showroom.png" alt="Showroom" className="w-full h-full object-contain" />
                                        </a>

                                        <FooterLink icon={<Icon path={Icons.Youtube} className="w-5 h-5" />} href="https://www.youtube.com/watch?v=yji2FFZQlGc" />
                                    </div>
                                    <div className="text-[10px] font-movie tracking-widest text-slate-600 uppercase">
                                        © 2025 Sato Shio Project.
                                    </div>
                                </div>
                            </footer>
                        </>
                    ) : (
                        <WorkDetail item={activeWork} onBack={handleBackClick} onNext={handleNextWork} />
                    )}

                    {/* VIDEO MODAL */}
                    {showVideoModal && (
                        <div className="fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4 backdrop-blur-md animate-fade-in-up" style={{animationDuration: '0.3s'}}>
                            <div className="relative w-full max-w-6xl flex flex-col gap-4">
                                <div className="relative aspect-video bg-black rounded-sm border border-white/10 shadow-[0_0_50px_rgba(217,70,239,0.2)]">
                                    <button onClick={() => setShowVideoModal(false)} className="absolute -top-12 right-0 text-white/50 hover:text-white transition-colors flex items-center gap-2 font-movie tracking-widest text-xs">CLOSE <Icon path={Icons.X} className="w-6 h-6" /></button>
                                    <div className="w-full h-full flex items-center justify-center bg-slate-900">
                                        <iframe width="100%" height="100%" src="https://www.youtube.com/embed/yji2FFZQlGc?autoplay=1" title="YouTube" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen></iframe>
                                    </div>
                                </div>
                                <div className="flex justify-center">
                                    <a href="https://www.youtube.com/watch?v=yji2FFZQlGc" target="_blank" rel="noopener noreferrer" className="flex items-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-full transition-colors text-sm font-bold font-movie tracking-wide">
                                        <Icon path={Icons.Youtube} className="w-5 h-5" /> Watch on YouTube <Icon path={Icons.ExternalLink} className="w-4 h-4" />
                                    </a>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const TechCard = ({ icon, num, title, model, desc }) => (
            <div className="bg-slate-950 p-8 md:p-10 group hover:bg-slate-900 transition-colors duration-500">
                <div className="flex justify-between items-start mb-8 md:mb-12">
                    {icon}
                    <span className="font-mono text-xs text-white/30">{num}</span>
                </div>
                <h3 className="font-movie text-lg font-bold text-white mb-2">{title}</h3>
                <div className="h-px w-10 bg-white/20 mb-6"></div>
                <div className="space-y-4">
                    <div>
                        <p className="text-[10px] font-movie text-slate-500 uppercase tracking-widest mb-1">MODEL</p>
                        <p className="font-movie text-xl text-fuchsia-400 font-bold">{model}</p>
                    </div>
                    <p className="font-jp text-sm text-slate-400 leading-relaxed">{desc}</p>
                </div>
            </div>
        );

        const FooterLink = ({ icon, href }) => (
            <a href={href} target="_blank" rel="noopener noreferrer" className="text-slate-500 hover:text-fuchsia-400 transition-colors">{icon}</a>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>